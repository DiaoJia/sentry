name: bootstrap
on:
  pull_request:
    paths:
    - 'Brewfile'
    - 'Makefile'
    - '.github/workflows/development-environment.yml'
    - 'scripts/*'
    - 'src/sentry/runner/commands/devserver.py'
    - 'src/sentry/runner/commands/devservices.py'

jobs:
  bootstrap-script:
    name: bootstrap
    runs-on: macos-11.0
    timeout-minutes: 35
    env:
      # This makes the script to git clone from https, thus, not requirying github access check
      # On the other hand, it will not clone getsentry for lack of access
      STRAP_CI: on
    steps:
      - name: Run bootstrap scripts
        run: |
          # XXX: Point to dev branch until merged
          bash <(curl -s https://raw.githubusercontent.com/getsentry/bootstrap-sentry/github_action/bootstrap.sh)
